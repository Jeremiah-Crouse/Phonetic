<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE PHONETIC ORACLE</title>
    <style>
        body { 
            background: #050505; 
            color: #00ff41; 
            font-family: 'Courier New', monospace; 
            margin: 0; 
            padding: 20px; 
            display: flex; 
            flex-direction: column; 
            height: 100vh;
            overflow: hidden;
        }
        #output-container {
            flex-grow: 1;
            overflow-y: auto;
            border: 1px solid #003300;
            padding: 20px;
            background: rgba(0, 20, 0, 0.2);
            box-shadow: inset 0 0 10px #000;
        }
        .result-entry {
            margin-bottom: 25px;
            padding: 15px;
            border-left: 3px solid #00ff41;
            background: rgba(0, 255, 65, 0.05);
            animation: fadeIn 0.5s ease-out;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .label { color: #888; font-size: 0.8em; text-transform: uppercase; margin-right: 10px; }
        .value { color: #ffffff; font-weight: bold; letter-spacing: 1px; }
        .hebrew { font-size: 1.5em; color: #00ff41; direction: rtl; }
        
        .input-area {
            display: flex;
            padding: 20px 0;
            background: #050505;
        }
        .prompt { color: #00ff41; font-weight: bold; margin-right: 10px; }
        input {
            background: transparent;
            border: none;
            color: #00ff41;
            font-family: 'Courier New', monospace;
            font-size: 1.2em;
            width: 100%;
            outline: none;
        }
        .loading { color: #888; font-style: italic; }
        
        /* Scrollbar styling */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #050505; }
        ::-webkit-scrollbar-thumb { background: #003300; }
    </style>
</head>
<body>

    <div id="output-container">
        <div style="color: #00ff41; opacity: 0.7;">
            [SYSTEM INITIALIZED]<br>
            [DOMAIN: phonetic-rr67.onrender.com]<br>
            [PROTOCOL: PHONETIC_HEBREW_ORACLE_V1]<br>
            ------------------------------------------------<br>
            Input a name to extract its signature...
        </div>
        <div id="results"></div>
    </div>

    <div class="input-area">
        <span class="prompt">ORACLE@ROOT:~$</span>
        <input type="text" id="nameInput" placeholder="Enter name..." autofocus autocomplete="off">
    </div>

    <script>
        const input = document.getElementById('nameInput');
        const resultsDiv = document.getElementById('results');
        const container = document.getElementById('output-container');

        const API_URL = 'https://phonetic-rr67.onrender.com/oracle';

        input.addEventListener('keypress', async (e) => {
            if (e.key === 'Enter' && input.value.trim() !== '') {
                const name = input.value.trim();
                input.value = '';
                
                // Add Loading State
                const loadingId = 'load-' + Date.now();
                resultsDiv.innerHTML += `<div id="${loadingId}" class="loading">Inquiring the machine for "${name}"...</div>`;
                container.scrollTop = container.scrollHeight;

                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ name: name })
                    });

                    if (!response.ok) throw new Error('Server connectivity lost.');

                    const data = await response.json();
                    
                    // Remove loading text
                    document.getElementById(loadingId).remove();

                    // Append Result
                    resultsDiv.innerHTML += `
                        <div class="result-entry">
                            <div><span class="label">IDENTITY:</span><span class="value">${name.toUpperCase()}</span></div>
                            <div style="margin: 10px 0;"><span class="label">SIGNATURE:</span><span class="hebrew">${data.hebrew}</span></div>
                            <div><span class="label">POWER:</span><span class="value" style="color:#00ff41">${data.power}</span></div>
                            <div><span class="label">DECREE:</span><span class="value" style="color:#ffcc00">${data.interpretation}</span></div>
                        </div>
                    `;
                } catch (err) {
                    document.getElementById(loadingId).innerHTML = `<span style="color: #ff0000;">[ERROR]: ${err.message}</span>`;
                }
                
                container.scrollTop = container.scrollHeight;
            }
        });
    </script>
</body>
</html>